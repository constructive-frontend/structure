"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var Form=function(){function t(e){_classCallCheck(this,t),this.el=e,this.action="",this.method="GET","undefined"!==_typeof(this.el.attr("action"))&&!1!==this.el.attr("action")&&(this.action=this.el.attr("action")),"undefined"!==_typeof(this.el.attr("method"))&&!1!==this.el.attr("method")&&(this.method=this.el.attr("method")),this.init()}return _createClass(t,[{key:"init",value:function(){var t=this;t.el.bind("submit",function(){return t.send(),!1}),t.el.find(":input").bind("change, focusout",function(){var e=$(this);return t.send(e),!1})}},{key:"send",value:function(i){var r=this;$.ajax({url:r.action,type:r.method,dataType:"json",data:r.el.serialize(),success:function(a,e,t){0<a.errors.length&&r.el.find(":input").each(function(e){var t=$(this),r=t.attr("name"),s=0;if(void 0===i||i.attr("name")==r){for(var n in a.errors){var o=a.errors[n];r==o.item&&(t.removeClass("success").addClass("error"),"LABEL"==t.prev().prop("tagName")&&t.prev().removeClass("success").addClass("error"),t.next().hasClass("errors")?t.next().html(o.msg):t.after("<div class='errors'>"+o.msg+"</div>"),s=1)}0==s&&(t.removeClass("error").addClass("success"),"LABEL"==t.prev().prop("tagName")&&t.prev().removeClass("error").addClass("success"),t.next().hasClass("errors")&&t.next().remove())}})}})}}]),t}();