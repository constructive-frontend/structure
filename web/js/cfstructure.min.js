"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var Struct=function(){function o(e,t,a,n,r,l,i){_classCallCheck(this,o),this.res=e,this.res instanceof jQuery?this.el=e:this.el=$(this.res),this.res=e,this.dom=t,this.data=a,null==n&&(n=function(){return!1}),this.events=n,this.dataurl=r,this.interval=l,this.dataloaded=!1,this.domloaded=!1,this.html="",this.errorevents=i,this.init()}return _createClass(o,[{key:"init",value:function(){var e=this;e.loadTmpl(),e.loadData(),null!=e.interval&&setInterval(function(){e.loadData(),e.render()},e.interval)}},{key:"render",value:function(){var e=this;if(e.dataloaded&&e.domloaded){if(Array.isArray(e.data))for(var t in e.el.html(""),e.data)e.el.append(e.setData(e.data[t],e.html));else e.el.html(e.setData(e.data,e.html));e.events()}else setTimeout(function(){e.render()},100);return e}},{key:"rerender",value:function(){this.dataloaded=!1,this.domloaded=!1,this.loadTmpl(),this.loadData(),this.render()}},{key:"setData",value:function(e,t){for(var a in e)t=t.replace(new RegExp("{{"+a+"}}","g"),e[a]);return t}},{key:"loadTmpl",value:function(){var t=this;void 0!==t.dom?-1!==t.dom.indexOf("{{")||-1!==t.dom.indexOf("<")?(t.domloaded=!0,t.html=t.dom):t.getData("/"+t.dom+".html",function(e){t.html=e.responseText,t.domloaded=!0},function(){t.domloaded=!0,t.html=t.dom}):(t.domloaded=!0,t.html=t.dom)}},{key:"loadData",value:function(){var t=this;null!=this.dataurl?t.getData(this.dataurl,function(e){t.data=JSON.parse(e.responseText),t.dataloaded=!0},t.errorevents):t.dataloaded=!0}},{key:"getData",value:function(e,t,a){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200==n.status?t(n):null!=a&&a())},n.open("GET",e,!0),n.send()}}]),o}();